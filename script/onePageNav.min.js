"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}/**
 * @options
 * @param {string} selector - Should target navigation "a" node elements e.g. ".main-nav a"
 * @param {string} defaultActiveAnchor - Should target link which will gain class Active if none section reached / active in exactMatch
 * @param {string} navigationActiveClass - class that should be added on anchor when section reached
 * @param {string} articleActiveClass - class that should be added on section when reached
 * @param {int} changeOffset -distance from top to be reached through next element to change active item. Value given in precents (0-100)% - default (50)
 * @param {boolean} classOnAnchorTag - class will be set at Anchors - default (true)
 * @param {boolean} defaultLinkActive - if no section was reached, default settet at defaultActiveAnchor or first link from list will gain class active
 * @param {boolean} setClassesOnSections - if true, reached/active section will gain class active
 * @param {boolean} exactMatch - set class only if offset place is between begin and end of section else default link or none
 * @param {array} parentsObtainingActiveClass - array with selectors of closest(selector) nodes, where class 'active' should be added or removed on change
 * @param {array} allowedPaths - List of paths, where script will be evaluated e.g ['', '/', '/start'], default empty - evaluated on every site
 * @param {array} onChange - array of functions, that should be fired on change fe. [function1, function2], function becomes two parameters: callback(activeArticle, previousArticle)
 * @param {boolean} debugLine - debug line
 */var onePageNav=/*#__PURE__*/function(){function onePageNav(){var _this=this;var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$selector=_ref.selector,selector=_ref$selector===void 0?"nav a":_ref$selector,_ref$defaultLinkActiv=_ref.defaultLinkActive,defaultLinkActive=_ref$defaultLinkActiv===void 0?true:_ref$defaultLinkActiv,_ref$classOnAnchorTag=_ref.classOnAnchorTag,classOnAnchorTag=_ref$classOnAnchorTag===void 0?true:_ref$classOnAnchorTag,_ref$changeOffset=_ref.changeOffset,changeOffset=_ref$changeOffset===void 0?50:_ref$changeOffset,_ref$parentsObtaining=_ref.parentsObtainingActiveClass,parentsObtainingActiveClass=_ref$parentsObtaining===void 0?[]:_ref$parentsObtaining,_ref$setClassesOnSect=_ref.setClassesOnSections,setClassesOnSections=_ref$setClassesOnSect===void 0?false:_ref$setClassesOnSect,_ref$debugLine=_ref.debugLine,_debugLine=_ref$debugLine===void 0?false:_ref$debugLine,_ref$exactMatch=_ref.exactMatch,exactMatch=_ref$exactMatch===void 0?false:_ref$exactMatch,_ref$allowedPaths=_ref.allowedPaths,allowedPaths=_ref$allowedPaths===void 0?undefined:_ref$allowedPaths,_ref$navigationActive=_ref.navigationActiveClass,navigationActiveClass=_ref$navigationActive===void 0?"active":_ref$navigationActive,_ref$articleActiveCla=_ref.articleActiveClass,articleActiveClass=_ref$articleActiveCla===void 0?"active":_ref$articleActiveCla,_ref$onChange=_ref.onChange,onChange=_ref$onChange===void 0?[]:_ref$onChange,_ref$differentActiveA=_ref.differentActiveAnchor,differentActiveAnchor=_ref$differentActiveA===void 0?undefined:_ref$differentActiveA;_classCallCheck(this,onePageNav);_defineProperty(this,"defaultLinkActive",void 0);_defineProperty(this,"defaultActiveAnchor",void 0);_defineProperty(this,"differentActiveAnchor",void 0);_defineProperty(this,"classOnAnchorTag",void 0);_defineProperty(this,"changeOffset",void 0);_defineProperty(this,"parentsObtainingActiveClass",void 0);_defineProperty(this,"setClassesOnSections",void 0);_defineProperty(this,"exactMatch",void 0);_defineProperty(this,"allowedPaths",void 0);_defineProperty(this,"debugLine",void 0);_defineProperty(this,"navigationActiveClass",void 0);_defineProperty(this,"articleActiveClass",void 0);_defineProperty(this,"previousArticle",void 0);_defineProperty(this,"currentArticle",void 0);_defineProperty(this,"linksInNav",void 0);_defineProperty(this,"articles",void 0);_defineProperty(this,"debugLines",void 0);_defineProperty(this,"currentWindowScrollListener",void 0);_defineProperty(this,"onChange",void 0);_defineProperty(this,"set",function(optionName,value){_this[optionName]=value;_this.newlyInitialized=true;_this.invoke();});_defineProperty(this,"invoke",function(){// Initialisiert sich nur auf Hauptseite - es ist nicht ganz so gute Idee(/start, /startseite)
if(_this.allowedPaths&&!_this.allowedPaths.includes(document.location.pathname))return;_this.handleDefaultLinkActive();_this.articles=_this.findRelatedArticles();if(!_this.articles.length){console.warn("No sections found");return;}_this.handleDebugLine();_this.handleScrollListener();_this.handleOutput();});_defineProperty(this,"findRelatedArticles",function(){var hashes=_this.linksInNav.map(function(el){return el.hash;}).filter(function(el){return el;});return _toConsumableArray(document.querySelectorAll(hashes.join(", ")));});_defineProperty(this,"handleScrollListener",function(){if(_this.currentWindowScrollListener){removeEventListener(scroll,_this.currentWindowScrollListener);}_this.currentWindowScrollListener=window.addEventListener("scroll",function(){return _this.handleOutput();});});_defineProperty(this,"handleOutput",function(){_this.findCurrentArticle();if(_this.articleChanged()||_this.newlyInitialized){_this.newlyInitialized=false;_this.clearClasses();_this.handleDefaultLinkActive();_this.handleCallbacks();if(_this.currentArticle==undefined)return;_this.handleArticleClasses();_this.addActiveClassesOnNavigationLinks();}});_defineProperty(this,"findLinksWithHashEqualToCurrentArticleId",function(links,hash){return links.filter(function(el){return el.hash.includes(hash);});});_defineProperty(this,"addActiveClass",function(el){if(_this.classOnAnchorTag){el.classList.add(_this.navigationActiveClass);}_this.parentsObtainingActiveClass.forEach(function(parentSelector){el.closest(parentSelector).classList.add(_this.navigationActiveClass);});});_defineProperty(this,"removeActiveClass",function(el){if(_this.classOnAnchorTag){el.classList.remove(_this.navigationActiveClass);}_this.parentsObtainingActiveClass.forEach(function(parentSelector){el.closest(parentSelector).classList.remove(_this.navigationActiveClass);});});_defineProperty(this,"handleDebugLine",function(){_this.debugLines.forEach(function(el){return el.remove();});if(_this.debugLine)_this.createDebugLine();});_defineProperty(this,"createDebugLine",function(){var debugLine=document.createElement("div");debugLine.setAttribute("style","position: fixed;width: 100%;background: red;height: 2px;top: calc(".concat(_this.changeOffset,"% - 1px);"));_this.debugLines.push(debugLine);document.body.appendChild(debugLine);});this.linksInNav=_toConsumableArray(document.querySelectorAll(selector));if(!this.linksInNav.length){console.error("No possible selectors were found. - `"+this.selector+"`");return;}this.defaultLinkActive=defaultLinkActive;this.classOnAnchorTag=classOnAnchorTag;this.changeOffset=changeOffset;this.parentsObtainingActiveClass=parentsObtainingActiveClass;this.setClassesOnSections=setClassesOnSections;this.debugLine=_debugLine;this.exactMatch=exactMatch;this.allowedPaths=allowedPaths;this.navigationActiveClass=navigationActiveClass;this.articleActiveClass=articleActiveClass;this.differentActiveAnchor=differentActiveAnchor;this.onChange=onChange;this.articles=[];this.debugLines=[];this.invoke();}_createClass(onePageNav,[{key:"findCurrentArticle",value:function findCurrentArticle(){var _this2=this;this.previousArticle=this.currentArticle;var tempCurrent=this.articles.filter(function(el){return el.offsetTop<window.scrollY+window.innerHeight/(100/_this2.changeOffset);}).at(-1);if(!this.exactMatch)this.currentArticle=tempCurrent;else if(tempCurrent){this.currentArticle=tempCurrent.offsetHeight+tempCurrent.offsetTop>window.scrollY+window.innerHeight/(100/this.changeOffset)?tempCurrent:this.handleDefaultLinkActive();}else{this.currentArticle=undefined;}}},{key:"clearClasses",value:function clearClasses(){var _this3=this;this.linksInNav.forEach(function(link){_this3.removeActiveClass(link);});this.articles.forEach(function(el){el.classList.remove(_this3.articleActiveClass);});}},{key:"handleDefaultLinkActive",value:function handleDefaultLinkActive(){if(this.differentActiveAnchor)this.defaultActiveAnchor=document.querySelector(this.differentActiveAnchor);if(this.currentArticle==undefined&&this.defaultLinkActive){var _this$defaultActiveAn;this.addActiveClass((_this$defaultActiveAn=this.defaultActiveAnchor)!==null&&_this$defaultActiveAn!==void 0?_this$defaultActiveAn:this.linksInNav[0]);}}},{key:"handleCallbacks",value:function handleCallbacks(){var _this4=this;this.onChange.forEach(function(callback){callback(_this4.currentArticle,_this4.previousArticle);});}},{key:"handleArticleClasses",value:function handleArticleClasses(){if(this.setClassesOnSections){this.currentArticle.classList.add(this.articleActiveClass);}}},{key:"addActiveClassesOnNavigationLinks",value:function addActiveClassesOnNavigationLinks(){var _this5=this;var currentlyActiveLinks=this.findLinksWithHashEqualToCurrentArticleId(this.linksInNav,this.currentArticle.id);currentlyActiveLinks.forEach(function(activeLink){return _this5.addActiveClass(activeLink);});}},{key:"articleChanged",value:function articleChanged(){return this.currentArticle!=this.previousArticle;}}]);return onePageNav;}();
