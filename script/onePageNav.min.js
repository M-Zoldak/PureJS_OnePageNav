"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}/**
 * @options
 * @param {string} navLinksSelector - selector targeting anchor tags
 * @param {string} elementDefaultActive - selector to element, which obtain class active, if none section was reached(or active in exact match)
 * @param {string} anchorActiveClass - class name that will be added on anchor when section reached and alternatively on parents passes inside parentsObtainingActiveClass
 * @param {string} sectionActiveClass - class name that will be added on section when reached
 * @param {int} changeOffset - the distance from the top of the page that the next element must be scrolled to in order to be activated. Value given in precents (0-100)% - default (50)
 * @param {boolean} classOnAnchorTag - name of class that should be set on anchor elements and parents if given for parentsObtainingActiveClasses - default (true)
 * @param {boolean} defaultLinkActive - determines whether first link element should be set as active.(t/f) May be combined with exact match option and/or element default active
 * @param {boolean} setClassesOnSections - if true, reached/active section will gain class active
 * @param {boolean} exactMatch - set class only if offset is located between begin and end of section
 * @param {boolean} updateHash - update hash accordingly to section
 * @param {boolean} saveHashBetweenSections - hash won't change if there's a gap between sections, and exact match is on
 * @param {array} parentsObtainingActiveClass - array of selectors for closest parent elements, where class 'active' should be added or removed when section changes
 * @param {array} allowedPaths - list of paths, where script will be evaluated e.g ['', '/', '/start'], currently only simple strings, default empty - evaluated on every site
 * @param {array} onChange - array of functions, that should be fired on change e.g. [function1, function2], callback function receives two parameters: callback(currentSection, previousSection)
 * @param {boolean} debugLine - show debug line
 */var onePageNav=/*#__PURE__*/_createClass(// prettier-ignore
function onePageNav(){var _this=this;var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$navLinksSelector=_ref.navLinksSelector,navLinksSelector=_ref$navLinksSelector===void 0?"nav a":_ref$navLinksSelector,_ref$defaultLinkActiv=_ref.defaultLinkActive,defaultLinkActive=_ref$defaultLinkActiv===void 0?true:_ref$defaultLinkActiv,_ref$classOnAnchorTag=_ref.classOnAnchorTag,classOnAnchorTag=_ref$classOnAnchorTag===void 0?true:_ref$classOnAnchorTag,_ref$changeOffset=_ref.changeOffset,changeOffset=_ref$changeOffset===void 0?50:_ref$changeOffset,_ref$parentsObtaining=_ref.parentsObtainingActiveClass,parentsObtainingActiveClass=_ref$parentsObtaining===void 0?[]:_ref$parentsObtaining,_ref$setClassesOnSect=_ref.setClassesOnSections,setClassesOnSections=_ref$setClassesOnSect===void 0?false:_ref$setClassesOnSect,_ref$debugLine=_ref.debugLine,_debugLine=_ref$debugLine===void 0?false:_ref$debugLine,_ref$exactMatch=_ref.exactMatch,exactMatch=_ref$exactMatch===void 0?false:_ref$exactMatch,_ref$allowedPaths=_ref.allowedPaths,allowedPaths=_ref$allowedPaths===void 0?undefined:_ref$allowedPaths,_ref$anchorActiveClas=_ref.anchorActiveClass,anchorActiveClass=_ref$anchorActiveClas===void 0?"active":_ref$anchorActiveClas,_ref$sectionActiveCla=_ref.sectionActiveClass,sectionActiveClass=_ref$sectionActiveCla===void 0?"active":_ref$sectionActiveCla,_ref$differentActiveA=_ref.differentActiveAnchor,differentActiveAnchor=_ref$differentActiveA===void 0?undefined:_ref$differentActiveA,_ref$updateHash=_ref.updateHash,updateHash=_ref$updateHash===void 0?false:_ref$updateHash,_ref$saveHashBetweenS=_ref.saveHashBetweenSections,saveHashBetweenSections=_ref$saveHashBetweenS===void 0?true:_ref$saveHashBetweenS,_ref$onChange=_ref.onChange,onChange=_ref$onChange===void 0?[]:_ref$onChange;_classCallCheck(this,onePageNav);/**
     * @description use to change script behavior and initialize with new values
     * @param {string} option
     * @param {string} value
     */_defineProperty(this,"set",function(option,value){_this[option]=value;_this.refresh();});/**
     * @description initializes values once again
     */_defineProperty(this,"refresh",function(){_this.newlyInitialized=true;_this.initialize();});_defineProperty(this,"initialize",function(){if(_this.shouldTerminate())return;_this.findLinks();if(!_this.linksInNav.length){console.error("The selector did not match any elements - `"+_this.navLinksSelector+"`");return;}_this.findRelatedSections();if(!_this.sections.length){console.warn("No sections found");return;}_this.handleDebugLine();_this.handleScrollListener();_this.handleOutput();});_defineProperty(this,"shouldTerminate",function(){if(!_this.allowedPaths)return false;var currentPath=document.location.pathname.trim();var pathMatchesAllowedPaths=_this.allowedPaths.some(function(el){return currentPath.match(el);});return!pathMatchesAllowedPaths;});_defineProperty(this,"findLinks",function(){_this.linksInNav=_toConsumableArray(document.querySelectorAll(_this.navLinksSelector));});_defineProperty(this,"findRelatedSections",function(){var hashes=_this.linksInNav.map(function(el){return el.hash;}).filter(function(el){return el;});_this.sections=_toConsumableArray(document.querySelectorAll(hashes.join(", ")));});_defineProperty(this,"handleScrollListener",function(){if(_this.currentWindowScrollListener){removeEventListener(scroll,_this.currentWindowScrollListener);}_this.currentWindowScrollListener=window.addEventListener("scroll",function(){return _this.handleOutput();});});_defineProperty(this,"handleOutput",function(){var foundSection=_this.findCurrentSection();_this.updateCurrentSection(foundSection);if(_this.sectionChanged()||_this.newlyInitialized){_this.newlyInitialized=false;_this.clearClasses();_this.handleDefaultLinkActive();_this.handleHash();_this.handleCallbacks();if(_this.noSectionActive())return;_this.handleSectionClasses();_this.addActiveClassesOnNavigationLinks();}});_defineProperty(this,"findCurrentSection",function(){return _this.sections.filter(function(section){return _this.isBelowSectionOffsetTop(section);}).at(-1);});_defineProperty(this,"updateCurrentSection",function(newSection){_this.previousSection=_this.currentSection;if(!_this.exactMatch){_this.currentSection=newSection!==null&&newSection!==void 0?newSection:_this.handleDefaultLinkActive();}else{_this.currentSection=_this.isAboveSectionOffsetBottom(newSection)?newSection:_this.handleDefaultLinkActive();}});_defineProperty(this,"clearClasses",function(){_this.linksInNav.forEach(function(link){_this.removeActiveClass(link);});_this.sections.forEach(function(el){el.classList.remove(_this.sectionActiveClass);});});_defineProperty(this,"handleDefaultLinkActive",function(){if(_this.differentActiveAnchor){_this.elementDefaultActive=document.querySelector(_this.differentActiveAnchor);}if(_this.noSectionActive()&&_this.defaultLinkActive){var _this$elementDefaultA;_this.addActiveClass((_this$elementDefaultA=_this.elementDefaultActive)!==null&&_this$elementDefaultA!==void 0?_this$elementDefaultA:_this.linksInNav[0]);}});_defineProperty(this,"handleHash",function(){if(!_this.updateHash){return;}else if(_this.exactMatch&&!_this.currentSection&&_this.saveHashBetweenSections&&_this.insideWorkingArea()){var lastSectionAbove=_this.findCurrentSection();history.pushState({},"",lastSectionAbove?"#"+lastSectionAbove.id:" ");}else{history.pushState({},"",_this.currentSection?"#"+_this.currentSection.id:" ");}});_defineProperty(this,"handleCallbacks",function(){_this.onChange.forEach(function(callback){callback(_this.currentSection,_this.previousSection);});});_defineProperty(this,"handleSectionClasses",function(){if(_this.setClassesOnSections){_this.currentSection.classList.add(_this.sectionActiveClass);}});_defineProperty(this,"addActiveClassesOnNavigationLinks",function(){var currentlyActiveLinks=_this.findLinksWithHashEqualTocurrentSectionId(_this.linksInNav,_this.currentSection.id);currentlyActiveLinks.forEach(function(activeLink){return _this.addActiveClass(activeLink);});});_defineProperty(this,"findLinksWithHashEqualTocurrentSectionId",function(links,hash){return links.filter(function(el){return el.hash.includes(hash);});});_defineProperty(this,"addActiveClass",function(el){if(_this.classOnAnchorTag){el.classList.add(_this.anchorActiveClass);}_this.parentsObtainingActiveClass.forEach(function(parentSelector){el.closest(parentSelector).classList.add(_this.anchorActiveClass);});});_defineProperty(this,"removeActiveClass",function(el){if(_this.classOnAnchorTag){el.classList.remove(_this.anchorActiveClass);}_this.parentsObtainingActiveClass.forEach(function(parentSelector){el.closest(parentSelector).classList.remove(_this.anchorActiveClass);});});_defineProperty(this,"sectionChanged",function(){return _this.currentSection!=_this.previousSection;});_defineProperty(this,"noSectionActive",function(){return _this.currentSection==undefined;});_defineProperty(this,"currentOffset",function(){return window.scrollY+window.innerHeight/(100/_this.changeOffset);});_defineProperty(this,"insideWorkingArea",function(){return _this.currentOffset()>_this.sections.at(0).offsetTop;});_defineProperty(this,"isExactlyInsideSection",function(section){return _this.isBelowSectionOffsetTop(section)&&_this.isAboveSectionOffsetBottom(section);});_defineProperty(this,"isAboveSectionOffsetTop",function(section){if(!section){return false;}return _this.currentOffset()<section.offsetTop;});_defineProperty(this,"isAboveSectionOffsetBottom",function(section){if(!section){return false;}return _this.currentOffset()<section.offsetTop+section.offsetHeight;});_defineProperty(this,"isBelowSectionOffsetTop",function(section){if(!section){return false;}return _this.currentOffset()>section.offsetTop;});_defineProperty(this,"isBelowSectionOffsetBottom",function(section){if(!section){return false;}return _this.currentOffset()>section.offsetTop+section.offsetHeight;});_defineProperty(this,"handleDebugLine",function(){_this.debugLines.forEach(function(el){return el.remove();});if(_this.debugLine)_this.createDebugLine();});_defineProperty(this,"createDebugLine",function(){var debugLine=document.createElement("div");debugLine.setAttribute("style","position: fixed;width: 100%;background: red;height: 2px;top: calc(".concat(_this.changeOffset,"% - 1px);"));_this.debugLines.push(debugLine);document.body.appendChild(debugLine);});this.navLinksSelector=navLinksSelector;this.defaultLinkActive=defaultLinkActive;this.classOnAnchorTag=classOnAnchorTag;this.changeOffset=changeOffset;this.parentsObtainingActiveClass=parentsObtainingActiveClass;this.setClassesOnSections=setClassesOnSections;this.debugLine=_debugLine;this.exactMatch=exactMatch;this.allowedPaths=allowedPaths;this.anchorActiveClass=anchorActiveClass;this.sectionActiveClass=sectionActiveClass;this.differentActiveAnchor=differentActiveAnchor;this.updateHash=updateHash;this.onChange=onChange;this.saveHashBetweenSections=saveHashBetweenSections;this.sections=[];this.debugLines=[];this.initialize();});
